"use strict";(self["webpackChunkweek8"]=self["webpackChunkweek8"]||[]).push([[495],{3998:function(s,t,e){e.d(t,{Z:function(){return h}});var n=e(3396),o=e(7139);const a={class:"toast-container position-fixed pe-3 top-0 end-0",style:{"z-index":"1500"}},i={class:"toast-header"},l={class:"me-auto"},r=["onClick"],c={key:0,class:"toast-body"};function u(s,t,e,u,d,p){return(0,n.wg)(),(0,n.iD)("div",a,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(d.messages,((s,t)=>((0,n.wg)(),(0,n.iD)("div",{class:(0,o.C_)(["toast show",`toast${t}`]),role:"alert",key:t},[(0,n._)("div",i,[(0,n._)("span",{class:(0,o.C_)(["p-2 rounded me-2 d-inline-block",`bg-${s.style}`])},null,2),(0,n._)("strong",l,(0,o.zw)(s.title),1),(0,n._)("button",{type:"button",class:"btn-close",onClick:s=>p.clearToast(t),"aria-label":"Close"},null,8,r)]),s.content?((0,n.wg)(),(0,n.iD)("div",c,(0,o.zw)(s.content),1)):(0,n.kq)("",!0)],2)))),128))])}var d={data(){return{messages:[]}},inject:["emitter"],methods:{toastShow(){setTimeout((()=>{this.messages.shift()}),6e3)},clearToast(s){this.messages.splice(s,1)}},mounted(){this.emitter.on("push-message",(s=>{const{style:t="success",title:e,content:n}=s;this.messages.push({style:t,title:e,content:n}),this.toastShow()}))}},p=e(89);const m=(0,p.Z)(d,[["render",u]]);var h=m},1495:function(s,t,e){e.r(t),e.d(t,{default:function(){return x}});var n=e(3396),o=e(9242);const a={class:"container"},i=(0,n._)("h2",null,"後台登入",-1),l={class:"row"},r={class:"col-12"},c={class:"form-floating"},u=(0,n._)("label",{for:"floatingInput"},"Email address",-1),d=(0,n._)("br",null,null,-1),p={class:"form-floating"},m=(0,n._)("label",{for:"floatingPassword"},"Password",-1),h={class:"mt-5 mb-3 text-muted"},g=(0,n.Uk)(" Vue-he-Week-8 作業用 © 2022 Jesse. "),w=(0,n.Uk)(" 回首頁 ");function f(s,t,e,f,v,k){const _=(0,n.up)("component-loading"),b=(0,n.up)("toast-messages"),y=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(_,{active:v.isLoading,"z-index":1060},null,8,["active"]),(0,n.Wm)(b),i,(0,n._)("div",l,[(0,n._)("div",r,[(0,n._)("form",{class:"form-signin",onSubmit:t[3]||(t[3]=(0,o.iM)(((...s)=>k.signIn&&k.signIn(...s)),["prevent"]))},[(0,n._)("div",c,[(0,n.wy)((0,n._)("input",{type:"email",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=s=>v.user.username=s),id:"floatingInput",placeholder:"Password",required:""},null,512),[[o.nr,v.user.username]]),u]),d,(0,n._)("div",p,[(0,n.wy)((0,n._)("input",{type:"password",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=s=>v.user.password=s),id:"floatingPassword",placeholder:"Password",required:""},null,512),[[o.nr,v.user.password]]),m]),(0,n._)("button",{type:"button",class:"btn btn-lg btn-primary w-100 mt-3",onClick:t[2]||(t[2]=(...s)=>k.signIn&&k.signIn(...s))}," 登入 ")],32)])]),(0,n._)("p",h,[g,(0,n.Wm)(y,{class:"nav-link",to:"/"},{default:(0,n.w5)((()=>[w])),_:1})])])}var v=e(4902),k=e(3998),_={components:{ToastMessages:k.Z},data(){return{user:{},isLoading:!1}},provide(){return{emitter:v.Z}},methods:{signIn(){const s="https://vue3-course-api.hexschool.io/v2/admin/signin";this.isLoading=!0,this.$http.post(s,this.user).then((s=>{const{token:t,expired:e}=s.data;document.cookie=`hexToken=${t};expires=${new Date(e)};`,this.isLoading=!1,this.$router.push("/admin/products")})).catch((s=>{this.isLoading=!1,this.$httpMessageState(s.response,"登入")}))}}},b=e(89);const y=(0,b.Z)(_,[["render",f]]);var x=y}}]);
//# sourceMappingURL=495.c53f6486.js.map