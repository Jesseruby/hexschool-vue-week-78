"use strict";(self["webpackChunkweek8"]=self["webpackChunkweek8"]||[]).push([[299],{3998:function(t,s,e){e.d(s,{Z:function(){return v}});var a=e(3396),n=e(7139);const o={class:"toast-container position-fixed pe-3 top-0 end-0",style:{"z-index":"1500"}},r={class:"toast-header"},i={class:"me-auto"},l=["onClick"],c={key:0,class:"toast-body"};function u(t,s,e,u,d,h){return(0,a.wg)(),(0,a.iD)("div",o,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.messages,((t,s)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,n.C_)(["toast show",`toast${s}`]),role:"alert",key:s},[(0,a._)("div",r,[(0,a._)("span",{class:(0,n.C_)(["p-2 rounded me-2 d-inline-block",`bg-${t.style}`])},null,2),(0,a._)("strong",i,(0,n.zw)(t.title),1),(0,a._)("button",{type:"button",class:"btn-close",onClick:t=>h.clearToast(s),"aria-label":"Close"},null,8,l)]),t.content?((0,a.wg)(),(0,a.iD)("div",c,(0,n.zw)(t.content),1)):(0,a.kq)("",!0)],2)))),128))])}var d={data(){return{messages:[]}},inject:["emitter"],methods:{toastShow(){setTimeout((()=>{this.messages.shift()}),6e3)},clearToast(t){this.messages.splice(t,1)}},mounted(){this.emitter.on("push-message",(t=>{const{style:s="success",title:e,content:a}=t;this.messages.push({style:s,title:e,content:a}),this.toastShow()}))}},h=e(89);const p=(0,h.Z)(d,[["render",u]]);var v=p},5299:function(t,s,e){e.r(s),e.d(s,{default:function(){return x}});var a=e(3396);function n(t,s,e,n,o,r){const i=(0,a.up)("dashboard-bar"),l=(0,a.up)("toast-messages"),c=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(i),(0,a.Wm)(l),o.status?((0,a.wg)(),(0,a.j4)(c,{key:0})):(0,a.kq)("",!0)],64)}var o=e(9242);const r={class:"navbar navbar-expand-lg navbar-dark bg-dark"},i={class:"container-fluid"},l=(0,a.Uk)("回到前台"),c=(0,a._)("button",{type:"button",class:"navbar-toggler","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,a._)("span",{class:"navbar-toggler-icon"})],-1),u={id:"navbarSupportedContent",class:"collapse navbar-collapse"},d={class:"navbar-nav me-auto mb-2 mb-lg-0"},h={class:"nav-item"},p=(0,a.Uk)(" 後台產品列表 "),v={class:"nav-item"},g=(0,a.Uk)(" 後台訂單列表 "),m={class:"nav-item"};function b(t,s,e,n,b,k){const w=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("nav",r,[(0,a._)("div",i,[(0,a.Wm)(w,{class:"navbar-brand",to:"/"},{default:(0,a.w5)((()=>[l])),_:1}),c,(0,a._)("div",u,[(0,a._)("ul",d,[(0,a._)("li",h,[(0,a.Wm)(w,{class:"nav-link",to:"/admin/products"},{default:(0,a.w5)((()=>[p])),_:1})]),(0,a._)("li",v,[(0,a.Wm)(w,{class:"nav-link",to:"/admin/orders"},{default:(0,a.w5)((()=>[g])),_:1})]),(0,a._)("li",m,[(0,a._)("a",{href:"#",class:"nav-link",onClick:s[0]||(s[0]=(0,o.iM)(((...t)=>k.logout&&k.logout(...t)),["prevent"]))}," 登出 ")])])])])])}var k={methods:{logout(){const t="https://vue3-course-api.hexschool.io/v2/logout";this.$http.post(t).then((t=>{this.$httpMessageState(t,"登出"),t.data.success&&this.$router.push("/login")})).catch((t=>{this.$httpMessageState(t.response,"錯誤訊息")}))}}},w=e(89);const f=(0,w.Z)(k,[["render",b]]);var _=f,$=e(3998),C=e(4902),y={components:{DashboardBar:_,ToastMessages:$.Z},data(){return{status:!1}},provide(){return{emitter:C.Z}},created(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=`${t}`;const s="https://vue3-course-api.hexschool.io/v2/api/user/check";this.$http.post(s).then((t=>{this.$httpMessageState(t,"登入"),this.status=!0})).catch((t=>{this.$router.push("/"),this.$httpMessageState(t.response,"錯誤訊息")}))}};const S=(0,w.Z)(y,[["render",n]]);var x=S}}]);
//# sourceMappingURL=299.90925600.js.map