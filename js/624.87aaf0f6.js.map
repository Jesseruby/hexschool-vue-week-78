{"version":3,"file":"js/624.87aaf0f6.js","mappings":"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","sources":["webpack://week8/./src/views/CartView.vue","webpack://week8/./src/views/CartView.vue?73a2"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <component-loading :active=\"isLoading\"></component-loading>\n    <h2>購物車</h2>\n    <div class=\"row justify-content-center\">\n      <div class=\"col-md-6\">\n        <div class=\"text-end\">\n          <button type=\"button\"\n            class=\"btn btn-danger\"\n            @click=\"delAllCarts\"\n            :disabled=\"cartData.carts.length === 0\">\n            清空購物車\n          </button>\n        </div><!-- .text-end -->\n        <table class=\"table align-middle\">\n          <thead>\n            <tr>\n              <th></th>\n              <th>品名</th>\n              <th style=\"width: 130px\">數量/單位</th>\n              <th></th>\n              <th>單價</th>\n            </tr>\n          </thead>\n          <tbody>\n            <template v-if=\"cartData.carts\">\n              <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\n                <td>\n                  <button type=\"button\"\n                    class=\"btn btn-outline-danger btn-sm\"\n                    @click=\"removeCartItem(item.id)\"\n                    :disabled=\"isLoadingItem === item.id\">\n                    <font-awesome-icon\n                      icon=\"spinner\" pulse\n                      v-if=\"isLoadingItem === item.id\"/>\n                    x\n                  </button>\n                </td>\n                <td>{{ item.product.title }}</td>\n                <td>\n                  <div class=\"input-group input-group-sm\">\n                    <div class=\"input-group mb-3\">\n                      <select class=\"form-select\"\n                        v-model=\"item.qty\"\n                        @change=\"updateCartItem(item)\"\n                        :disabled=\"isLoadingItem === item.id\">\n                        <option\n                          v-for=\"num in 10\"\n                          :key=\"`${num}-${item.id}`\"\n                          :value=\"num\">\n                          {{ num }}\n                        </option>\n                      </select>\n                      <span class=\"input-group-text\"\n                        id=\"basic-addon2\">\n                        {{ item.product.unit }}\n                      </span>\n                    </div>\n                  </div>\n                </td>\n                <td></td>\n                <td class=\"text-end\">{{ item.total }}</td>\n              </tr>\n            </template>\n          </tbody>\n          <tfoot>\n            <tr>\n              <td colspan=\"4\" class=\"text-end\">總計</td>\n              <td class=\"text-end\">{{ cartData.total }}</td>\n            </tr>\n          </tfoot>\n        </table>\n      </div><!-- .col -->\n    </div><!-- .row -->\n    <div class=\"my-5 row justify-content-center\">\n      <component-form\n        ref=\"form\"\n        class=\"col-md-6\"\n        v-slot=\"{ errors }\"\n        @submit=\"createOrder\">\n        <div class=\"mb-3\">\n          <label for=\"email\" class=\"form-label\">Email</label>\n          <component-field\n            id=\"email\"\n            name=\"email\"\n            type=\"email\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['email'] }\"\n            placeholder=\"請輸入 Email\"\n            rules=\"email|required\"\n            v-model=\"form.user.email\"></component-field>\n          <error-message name=\"email\" class=\"invalid-feedback\"></error-message>\n        </div><!-- .label -->\n        <div class=\"mb-3\">\n          <label for=\"name\" class=\"form-label\">收件人姓名</label>\n          <component-field\n            id=\"name\"\n            name=\"姓名\"\n            type=\"text\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['姓名'] }\"\n            placeholder=\"請輸入姓名\"\n            rules=\"required\"\n            v-model=\"form.user.name\"></component-field>\n          <error-message name=\"姓名\" class=\"invalid-feedback\"></error-message>\n        </div><!-- .label -->\n        <div class=\"mb-3\">\n          <label for=\"tel\" class=\"form-label\">收件人電話</label>\n          <component-field\n            id=\"tel\"\n            name=\"電話\"\n            type=\"text\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['電話'] }\"\n            placeholder=\"請輸入電話\"\n            :rules=\"isPhone\"\n            v-model=\"form.user.tel\"></component-field>\n          <error-message name=\"電話\" class=\"invalid-feedback\"></error-message>\n        </div><!-- .label -->\n        <div class=\"mb-3\">\n          <label for=\"address\" class=\"form-label\">收件人地址</label>\n          <component-field\n            id=\"address\"\n            name=\"地址\"\n            type=\"text\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['地址'] }\"\n            placeholder=\"請輸入地址\"\n            rules=\"required\"\n            v-model=\"form.user.address\"></component-field>\n          <error-message name=\"地址\" class=\"invalid-feedback\"></error-message>\n        </div><!-- .label -->\n        <div class=\"mb-3\">\n          <label for=\"message\" class=\"form-label\">留言</label>\n          <textarea\n            name=\"\"\n            id=\"message\"\n            class=\"form-control\"\n            cols=\"30\"\n            rows=\"10\"\n            v-model=\"form.message\"></textarea>\n        </div><!-- .label -->\n        <div class=\"text-end\">\n          <button type=\"submit\"\n            class=\"btn btn-danger\"\n            :disabled=\"Object.keys(errors).length > 0 || cartData.carts.length === 0\">\n            送出訂單\n          </button>\n        </div><!-- .submit -->\n      </component-form>\n    </div><!-- .row -->\n  </div>\n</template>\n\n<script>\nimport emitter from '@/libs/emitter';\n\nexport default {\n  data() {\n    return {\n      cartData: {\n        carts: [],\n      },\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n      products: [],\n      isLoadingItem: '',\n      isLoading: false,\n    };\n  },\n  methods: {\n    isPhone(value) {\n      const phoneNum = /(^09|\\+?8869)\\d{2}(-?\\d{3}-?\\d{3})$/;\n      return phoneNum.test(value) ? true : '請輸入正確的手機號碼，格式：0912-345-678';\n    },\n    getProducts() {\n      this.$http\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products`)\n        .then((res) => {\n          console.log(res);\n          this.products = res.data.products;\n        });\n    },\n    getCart() {\n      this.isLoading = true;\n      this.$http\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then((res) => {\n          this.cartData = res.data.data;\n          this.isLoading = false;\n          emitter.emit('get-cart');\n        });\n    },\n    removeCartItem(id) {\n      this.isLoadingItem = id;\n      this.$http\n        .delete(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`)\n        .then((res) => {\n          console.log(res);\n          this.getCart();\n          this.isLoadingItem = '';\n          emitter.emit('get-cart');\n        });\n    },\n    updateCartItem(item) {\n      const data = {\n        product_id: item.product_id,\n        qty: item.qty,\n      };\n      this.isLoadingItem = item.id;\n      this.$http\n        .put(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`, { data })\n        .then((res) => {\n          console.log(res);\n          this.getCart();\n          this.isLoadingItem = '';\n        });\n    },\n    delAllCarts() {\n      this.isLoading = true;\n      this.$http\n        .delete(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`\n        )\n        .then((res) => {\n          console.log(res);\n          this.isLoading = false;\n          this.getCart();\n          emitter.emit('get-cart');\n        });\n    },\n    createOrder() {\n      this.isLoading = true;\n      const order = this.form;\n      this.$http\n        .post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order`, { data: order })\n        .then((res) => {\n          this.isLoading = false;\n          console.log(res);\n          this.$refs.form.resetForm();\n          this.getCart();\n        });\n    },\n  },\n  mounted() {\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=054261ae\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\jesse\\\\OneDrive\\\\Learning\\\\課程_六角學院\\\\202201-六角-Vue作品實戰班\\\\Week-7+8\\\\vue-hw-week8-1\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","id","colspan","for","_createElementBlock","_createVNode","_component_component_loading","active","$data","_hoisted_2","type","onClick","$options","disabled","carts","length","_hoisted_6","_hoisted_8","_Fragment","key","_renderList","item","_createBlock","_component_font_awesome_icon","icon","pulse","_toDisplayString","product","title","qty","$event","onChange","num","value","_hoisted_14","unit","_hoisted_16","total","_hoisted_18","_component_component_form","ref","onSubmit","errors","_hoisted_22","_component_component_field","name","placeholder","rules","user","email","_component_error_message","_hoisted_24","_hoisted_26","tel","_hoisted_28","address","_hoisted_30","cols","rows","message","Object","keys","_hoisted_32","data","cartData","form","products","isLoadingItem","isLoading","methods","isPhone","phoneNum","test","getProducts","this","$http","get","then","res","console","log","getCart","emitter","removeCartItem","delete","updateCartItem","product_id","put","delAllCarts","createOrder","order","post","$refs","resetForm","mounted","__exports__","render"],"sourceRoot":""}