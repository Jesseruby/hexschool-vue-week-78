"use strict";(self["webpackChunkweek8"]=self["webpackChunkweek8"]||[]).push([[278],{1278:function(t,o,d){d.r(o),d.d(o,{default:function(){return X}});var i=d(3396),a=d(7139);const s={class:"container"},e=(0,i._)("h2",null,"前台產品列表",-1),l={class:"container"},c={class:"row row-cols-1 row-cols-lg-5 g-3"},r={class:"card h-100"},n=["src"],p={class:"card-body"},u={class:"card-title"},g={class:"card-text"},h={key:0,class:"h5"},m={key:1},_={class:"h6"},b={class:"h5"},v={class:"card-footer bg-white"},w={class:"d-grid gap-2 text-center d-md-block"},y=["disabled","onClick"],k=(0,i.Uk)(" 查看更多 "),M=["disabled","onClick"],f=(0,i.Uk)(" 加到購物車 ");function L(t,o,d,L,x,z){const C=(0,i.up)("component-loading"),P=(0,i.up)("font-awesome-icon"),$=(0,i.up)("page-pagination"),I=(0,i.up)("product-modal");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(C,{active:x.isLoading},null,8,["active"]),e,(0,i._)("div",l,[(0,i._)("div",c,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(x.products,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col",key:t.id},[(0,i._)("div",r,[(0,i._)("img",{src:t.imageUrl,class:"card-img-top",alt:"..."},null,8,n),(0,i._)("div",p,[(0,i._)("h5",u,(0,a.zw)(t.title),1),(0,i._)("p",g,(0,a.zw)(t.description),1),t.price===t.origin_price?((0,i.wg)(),(0,i.iD)("div",h,(0,a.zw)(t.price)+" 元 ",1)):((0,i.wg)(),(0,i.iD)("div",m,[(0,i._)("del",_,"原價 "+(0,a.zw)(t.origin_price)+" 元",1),(0,i._)("p",b,"現在只要 "+(0,a.zw)(t.price)+" 元",1)]))]),(0,i._)("div",v,[(0,i._)("div",w,[(0,i._)("button",{type:"button",class:"btn my-2 me-2 btn-outline-primary btn-sm",disabled:x.isLoadingItem===t.id,onClick:o=>z.openProductModal(t.id)},[x.isLoadingItem===t.id?((0,i.wg)(),(0,i.j4)(P,{key:0,icon:"spinner",pulse:""})):(0,i.kq)("",!0),k],8,y),(0,i._)("button",{type:"button",class:"btn btn-primary btn-sm",disabled:x.isLoadingItem===t.id,onClick:o=>z.addCart(t.id)},[x.isLoadingItem===t.id?((0,i.wg)(),(0,i.j4)(P,{key:0,icon:"spinner",pulse:""})):(0,i.kq)("",!0),f],8,M)])])])])))),128))]),(0,i.Wm)($,{pages:x.pagination,onGetProduct:z.getProducts},null,8,["pages","onGetProduct"])]),(0,i.Wm)(I,{ref:"productModal",id:x.productId,onAddCart:z.addCart},null,8,["id","onAddCart"])])}var x=d(4902),z=d(9242);const C={id:"productModal",class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},P={class:"modal-dialog modal-xl",role:"document"},$={class:"modal-content border-0"},I={class:"modal-header bg-dark text-white"},D={class:"modal-title",id:"exampleModalLabel"},q=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),j={class:"modal-body"},U={class:"row"},W={class:"col-sm-6"},H=["src"],Y={class:"col-sm-6"},Z={class:"badge bg-primary rounded-pill"},A={class:"h5"},G={class:"h6"},K={class:"h5"},V={class:"input-group"},B=["value"];function E(t,o,d,s,e,l){const c=(0,i.up)("component-loading");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(c,{active:t.isLoading},null,8,["active"]),(0,i._)("div",C,[(0,i._)("div",P,[(0,i._)("div",$,[(0,i._)("div",I,[(0,i._)("h5",D,[(0,i._)("span",null,(0,a.zw)(e.product.title),1)]),q]),(0,i._)("div",j,[(0,i._)("div",U,[(0,i._)("div",W,[(0,i._)("img",{class:"img-fluid",src:e.product.imageUrl,alt:""},null,8,H)]),(0,i._)("div",Y,[(0,i._)("span",Z,(0,a.zw)(e.product.category),1),(0,i._)("p",null,"商品描述："+(0,a.zw)(e.product.description),1),(0,i._)("p",null,"商品內容："+(0,a.zw)(e.product.content),1),(0,i._)("div",A,(0,a.zw)(e.product.origin_price)+" 元",1),(0,i._)("del",G,"原價 "+(0,a.zw)(e.product.origin_price)+" 元",1),(0,i._)("div",K,"現在只要 "+(0,a.zw)(e.product.price)+" 元",1),(0,i._)("div",null,[(0,i._)("div",V,[(0,i.wy)((0,i._)("select",{id:"",class:"form-select","onUpdate:modelValue":o[0]||(o[0]=t=>e.qty=t)},[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(5,(t=>(0,i._)("option",{value:t,key:`${t}-${d.id}`},(0,a.zw)(t),9,B))),64))],512),[[z.bM,e.qty]]),(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:o[1]||(o[1]=o=>t.$emit("add-cart",e.product.id,e.qty))}," 加入購物車 ")])])])])])])])],512)],64)}var F=d(7972),J=d.n(F),N={props:["id"],data(){return{modal:{},product:{},qty:1}},watch:{id(){this.product={},this.getProduct()}},methods:{getProduct(){this.isLoading=!0,this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/jesse-hexschool/product/${this.id}`).then((t=>{this.isLoading=!1,console.log(t),this.product=t.data.product}))},openModal(){this.productModal.show()},closeModal(){this.productModal.hide()}},mounted(){this.productModal=new(J())(this.$refs.modal,{keyboard:!1,backdrop:"static"})}},O=d(89);const Q=(0,O.Z)(N,[["render",E]]);var R=Q,S={data(){return{cartData:{carts:[]},products:[],productId:"",isLoadingItem:"",isLoading:!1,product:{},modal:{ProductModal:""},pagination:{}}},components:{ProductModal:R},methods:{addCart(t,o=1){const d={product_id:t,qty:o};this.isLoadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/jesse-hexschool/cart",{data:d}).then((t=>{console.log(t),this.$refs.productModal.closeModal(),this.isLoadingItem="",x.Z.emit("get-cart")}))},getProducts(t=1){this.isLoading=!0,this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/jesse-hexschool/products?page=${t}`).then((t=>{this.products=t.data.products,this.isLoading=!1,this.pagination=t.data.pagination}))},openProductModal(t){this.productId=t,this.$refs.productModal.openModal()}},mounted(){this.getProducts()}};const T=(0,O.Z)(S,[["render",L]]);var X=T}}]);
//# sourceMappingURL=278.65dde5c3.js.map