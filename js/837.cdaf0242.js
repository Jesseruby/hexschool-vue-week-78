"use strict";(self["webpackChunkweek8"]=self["webpackChunkweek8"]||[]).push([[837],{8837:function(t,o,d){d.r(o),d.d(o,{default:function(){return dt}});var i=d(6252),a=d(3577);const e=t=>((0,i.dD)("data-v-2b50715d"),t=t(),(0,i.Cn)(),t),s={class:"container"},c=e((()=>(0,i._)("h2",{class:"text-pinkdeep"},"產品列表",-1))),l={class:"container"},n={class:"row row-cols-1 row-cols-lg-4 g-4"},r={class:"card"},p=["src"],u={class:"card-body"},g={class:"card-title"},h={class:"card-text"},m={key:0,class:"h5"},_={key:1},v={class:"h6"},b={class:"h5"},w={class:"card-footer bg-white"},k={class:"d-grid gap-2 text-center d-md-block"},y=["disabled","onClick"],f=(0,i.Uk)(" 查看更多 "),M=["disabled","onClick"],x=(0,i.Uk)(" 加到購物車 ");function C(t,o,d,e,C,L){const z=(0,i.up)("component-loading"),P=(0,i.up)("font-awesome-icon"),I=(0,i.up)("page-pagination"),$=(0,i.up)("product-modal");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(z,{active:C.isLoading},null,8,["active"]),c,(0,i._)("div",l,[(0,i._)("div",n,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(C.products,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col",key:t.id},[(0,i._)("div",r,[(0,i._)("img",{src:t.imageUrl,class:"card-img-top",alt:"...",style:{"object-fit":"cover",height:"300px"}},null,8,p),(0,i._)("div",u,[(0,i._)("h5",g,(0,a.zw)(t.title),1),(0,i._)("p",h,(0,a.zw)(t.description),1),t.price===t.origin_price?((0,i.wg)(),(0,i.iD)("div",m,(0,a.zw)(t.price)+" 元 ",1)):((0,i.wg)(),(0,i.iD)("div",_,[(0,i._)("del",v,"原價 "+(0,a.zw)(t.origin_price)+" 元",1),(0,i._)("p",b,"現在只要 "+(0,a.zw)(t.price)+" 元",1)]))]),(0,i._)("div",w,[(0,i._)("div",k,[(0,i._)("button",{type:"button",class:"btn my-2 me-2 btn-outline-pinkdeep btn-sm",disabled:C.isLoadingItem===t.id,onClick:o=>L.openProductModal(t.id)},[C.isLoadingItem===t.id?((0,i.wg)(),(0,i.j4)(P,{key:0,icon:"spinner",pulse:""})):(0,i.kq)("",!0),f],8,y),(0,i._)("button",{type:"button",class:"btn btn-pinkdeep btn-sm",disabled:C.isLoadingItem===t.id,onClick:o=>L.addCart(t.id)},[C.isLoadingItem===t.id?((0,i.wg)(),(0,i.j4)(P,{key:0,icon:"spinner",pulse:""})):(0,i.kq)("",!0),x],8,M)])])])])))),128))]),(0,i.Wm)(I,{pages:C.pagination,onGetProduct:L.getProducts},null,8,["pages","onGetProduct"])]),(0,i.Wm)($,{ref:"productModal",id:C.productId,onAddCart:L.addCart},null,8,["id","onAddCart"])])}var L=d(5065),z=d(4902),P=d(9963);const I=t=>((0,i.dD)("data-v-8668e40a"),t=t(),(0,i.Cn)(),t),$={id:"productModal",class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},D={class:"modal-dialog modal-xl",role:"document"},j={class:"modal-content border-0"},q={class:"modal-header bg-pinkdeep text-wite"},U={class:"modal-title ms-auto"},W=I((()=>(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))),Z={class:"modal-body"},H={class:"row"},Y={class:"col-sm-6"},A=["src"],G={class:"col-sm-6"},K={class:"badge bg-pinkdeep rounded-pill"},V={class:"h5"},B={class:"h6"},E={class:"h5"},F={class:"input-group"},J=["value"];function N(t,o,d,e,s,c){const l=(0,i.up)("component-loading");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(l,{active:t.isLoading},null,8,["active"]),(0,i._)("div",$,[(0,i._)("div",D,[(0,i._)("div",j,[(0,i._)("div",q,[(0,i._)("h4",U,[(0,i._)("span",null,(0,a.zw)(s.product.title),1)]),W]),(0,i._)("div",Z,[(0,i._)("div",H,[(0,i._)("div",Y,[(0,i._)("img",{class:"img-fluid",src:s.product.imageUrl,alt:"",style:{"object-fit":"cover",height:"600px",width:"100%"}},null,8,A)]),(0,i._)("div",G,[(0,i._)("span",K,(0,a.zw)(s.product.category),1),(0,i._)("p",null,"商品描述："+(0,a.zw)(s.product.description),1),(0,i._)("p",null,"商品內容："+(0,a.zw)(s.product.content),1),(0,i._)("div",V,(0,a.zw)(s.product.origin_price)+" 元",1),(0,i._)("del",B,"原價 "+(0,a.zw)(s.product.origin_price)+" 元",1),(0,i._)("div",E,"現在只要 "+(0,a.zw)(s.product.price)+" 元",1),(0,i._)("div",null,[(0,i._)("div",F,[(0,i.wy)((0,i._)("select",{id:"",class:"form-select","onUpdate:modelValue":o[0]||(o[0]=t=>s.qty=t)},[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(5,(t=>(0,i._)("option",{value:t,key:`${t}-${d.id}`},(0,a.zw)(t),9,J))),64))],512),[[P.bM,s.qty]]),(0,i._)("button",{type:"button",class:"btn btn-pinkdeep",onClick:o[1]||(o[1]=o=>t.$emit("add-cart",s.product.id,s.qty))}," 加入購物車 ")])])])])])])])],512)],64)}var O=d(7424),Q=d.n(O),R={props:["id"],data(){return{modal:{},product:{},qty:1}},watch:{id(){this.product={},this.getProduct()}},methods:{getProduct(){this.isLoading=!0,this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/jesse-hexschool/product/${this.id}`).then((t=>{this.isLoading=!1,console.log(t),this.product=t.data.product}))},openModal(){this.productModal.show()},closeModal(){this.productModal.hide()}},mounted(){this.productModal=new(Q())(this.$refs.modal,{keyboard:!1,backdrop:"static"})}},S=d(3744);const T=(0,S.Z)(R,[["render",N],["__scopeId","data-v-8668e40a"]]);var X=T,tt={data(){return{cartData:{carts:[]},products:[],productId:"",isLoadingItem:"",isLoading:!1,product:{},modal:{ProductModal:""},pagination:{}}},components:{PagePagination:L.Z,ProductModal:X},methods:{addCart(t,o=1){const d={product_id:t,qty:o};this.isLoadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/jesse-hexschool/cart",{data:d}).then((t=>{console.log(t),this.$refs.productModal.closeModal(),this.isLoadingItem="",z.Z.emit("get-cart")}))},getProducts(t=1){this.isLoading=!0,this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/jesse-hexschool/products?page=${t}`).then((t=>{this.products=t.data.products,this.isLoading=!1,this.pagination=t.data.pagination}))},openProductModal(t){this.productId=t,this.$refs.productModal.openModal()}},mounted(){this.getProducts()}};const ot=(0,S.Z)(tt,[["render",C],["__scopeId","data-v-2b50715d"]]);var dt=ot}}]);
//# sourceMappingURL=837.cdaf0242.js.map