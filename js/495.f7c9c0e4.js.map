{"version":3,"file":"js/495.f7c9c0e4.js","mappings":"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","sources":["webpack://week8/./src/components/ToastMessages.vue","webpack://week8/./src/components/ToastMessages.vue?2a51","webpack://week8/./src/views/LoginView.vue","webpack://week8/./src/views/LoginView.vue?5755"],"sourcesContent":["<template>\n  <div class=\"toast-container position-fixed pe-3 top-0 end-0\"\n    style=\"z-index: 1500\">\n    <div class=\"toast show\" role=\"alert\"\n      v-for=\"(msg, key) in messages\"\n      :key=\"key\"\n      :class=\"`toast${key}`\">\n      <div class=\"toast-header\">\n        <span class=\"p-2 rounded me-2 d-inline-block\"\n          :class=\"`bg-${msg.style}`\">\n        </span>\n        <strong class=\"me-auto\">\n          {{ msg.title }}\n        </strong>\n        <button type=\"button\"\n          class=\"btn-close\"\n          @click=\"clearToast(key)\"\n          aria-label=\"Close\">\n        </button>\n      </div><!-- .toast-header -->\n      <div class=\"toast-body\" v-if=\"msg.content\">\n        {{ msg.content }}\n      </div><!-- .toast-body -->\n    </div><!-- .toast -->\n  </div><!-- .toast-container -->\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      messages: [],\n    };\n  },\n  inject: ['emitter'],\n  methods: {\n    toastShow() {\n      setTimeout(() => {\n        this.messages.shift();\n      }, 6000);\n    },\n    clearToast(index) {\n      this.messages.splice(index, 1);\n    },\n  },\n  mounted() {\n    this.emitter.on('push-message', (message) => {\n      const { style = 'success', title, content } = message;\n      this.messages.push({ style, title, content });\n      this.toastShow();\n    });\n  },\n};\n</script>\n","import { render } from \"./ToastMessages.vue?vue&type=template&id=6f3c499c\"\nimport script from \"./ToastMessages.vue?vue&type=script&lang=js\"\nexport * from \"./ToastMessages.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\soyxi\\\\Downloads\\\\20220403-week-8\\\\hexschool-vue-week-78-main\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"container\">\n    <component-loading :active=\"isLoading\" :z-index=\"1060\"></component-loading>\n    <toast-messages></toast-messages>\n    <h2>後台登入</h2>\n    <div class=\"row\">\n      <div class=\"col-12\">\n        <form class=\"form-signin\" @submit.prevent=\"signIn\">\n          <div class=\"form-floating\">\n            <input type=\"email\"\n              class=\"form-control\"\n              v-model=\"user.username\"\n              id=\"floatingInput\"\n              placeholder=\"Password\"\n              required/>\n            <label for=\"floatingInput\">Email address</label>\n          </div><!-- .form-floating -->\n          <br/>\n          <div class=\"form-floating\">\n            <input type=\"password\"\n              class=\"form-control\"\n              v-model=\"user.password\"\n              id=\"floatingPassword\"\n              placeholder=\"Password\"\n              required/>\n            <label for=\"floatingPassword\">Password</label>\n          </div><!-- .form-floating -->\n          <button type=\"button\"\n            class=\"btn btn-lg btn-primary w-100 mt-3\"\n            @click=\"signIn\">\n            登入\n          </button>\n        </form>\n      </div><!-- .col -->\n    </div><!-- .row -->\n    <p class=\"mt-5 mb-3 text-muted\">\n      Vue-he-Week-8 作業用 &copy; 2022 Jesse.\n      <router-link class=\"nav-link\"\n        to=\"/\">\n        回首頁\n      </router-link>\n    </p>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/libs/emitter';\nimport ToastMessages from '@/components/ToastMessages.vue';\n\nexport default {\n  components: {\n    ToastMessages,\n  },\n  data() {\n    return {\n      user: {},\n      isLoading: false,\n    };\n  },\n  provide() {\n    return {\n      emitter,\n    };\n  },\n  methods: {\n    signIn() {\n      const api = `${process.env.VUE_APP_API}/admin/signin`;\n      this.isLoading = true;\n      this.$http\n        .post(api, this.user)\n        //成功的結果\n        .then((res) => {\n          //取出token，解構的寫法\n          const { token, expired } = res.data;\n          // 儲存登入的cookie token資訊\n          // expires 設置有效時間 unix timestamp 時間紀錄\n          document.cookie = `hexToken=${token};expires=${new Date(expired)};`;\n          this.isLoading = false;\n          // 轉址的動作 $router(方法), $route(取得參數)\n          // 轉址到後台使用 push() 方法，陣列的概念 ['/','login','admin/products']\n          this.$router.push('/admin/products');\n        })\n        //失敗結果\n        .catch((err) => {\n          this.isLoading = false;\n          this.$httpMessageState(err.response, '登入');\n        });\n    },\n  },\n};\n</script>\n","import { render } from \"./LoginView.vue?vue&type=template&id=9b01b9c4\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\soyxi\\\\Downloads\\\\20220403-week-8\\\\hexschool-vue-week-78-main\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","style","_createElementBlock","_Fragment","_renderList","$data","msg","key","role","_createElementVNode","_toDisplayString","title","type","onClick","$options","content","data","messages","inject","methods","toastShow","setTimeout","this","shift","clearToast","index","splice","mounted","emitter","on","message","push","__exports__","render","for","_createVNode","_component_component_loading","active","_component_toast_messages","_hoisted_2","onSubmit","username","$event","id","placeholder","required","_hoisted_6","_hoisted_7","password","_hoisted_9","_component_router_link","to","components","ToastMessages","user","isLoading","provide","signIn","api","$http","post","then","res","token","expired","document","cookie","Date","$router","catch","err","$httpMessageState","response"],"sourceRoot":""}